{# templates/profile/show.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Profil de {{ user.pseudo }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/profile.css') }}">
{% endblock %}


{% block body %}
<div class="profile-card">
    <div class="profile-header-bg">
        <img class="profile-avatar" src="{{ user.avatar ? asset('uploads/avatars/' ~ user.avatar.path) : asset('images/default-avatar.webp') }}" alt="Avatar">
    </div>

    <div class="profile-stats">
        <div>
            <strong>{{ user.followers|length }}</strong><br>
            <span>Followers</span>
        </div>
        <div>
            <strong>{{ user.subscriptions|length }}</strong><br>
            <span>Following</span>
        </div>
    </div>

    <div class="profile-identity">
        <h2>{{ user.fullName ? user.fullName : user.pseudo }}</h2>
        <p class="username">@{{ user.pseudo|lower }}</p>
        <p class="bio">üåü Hello, I'm UX/UI designer. Open to the new projects. üåü</p>
    </div>

    <div>
        <div class="section-title">Tweets</div>
        {% for tweet in user.tweets %}
            <div class="tweet">
                <p>{{ tweet.content }}</p>
                <time>{{ tweet.publicationDate|date('d/m/Y H:i') }}</time>
            </div>
        {% else %}
            <p class="empty">Aucun tweet</p>
        {% endfor %}
    </div>

    {# <div>
        <div class="section-title">Abonnements</div>
        {% for subscription in user.subscriptions %}
            <a href="{{ path('profile_show', {'id': subscription.followedUser.id}) }}">
                <div class="following">
                        {{ subscription.followedUser.pseudo }}
                </div>
            </a>
        {% else %}
            <p class="empty">Aucun abonnement</p>
        {% endfor %}
    </div>

    <div>
        <div class="section-title">Abonn√©s</div>
        {% for subscription in user.followers %}
            <a href="{{ path('profile_show', {'id': subscription.followingUser.id}) }}">
                <div class="follower">
                        {{ subscription.followingUser.pseudo }}
                </div>
            </a>
        {% else %}
            <p class="empty">Aucun abonn√©</p>
        {% endfor %}
    </div> #}

    <form method="post" action="{{ path('profile_follow', {'id': user.id}) }}">
        <button type="submit">
            {% if user.isFollowed %}
                ‚ùå Se d√©sabonner
            {% else %}
                ‚ûï S‚Äôabonner
            {% endif %}
        </button>
    </form>


</div>
{% endblock %}
