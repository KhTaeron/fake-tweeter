{% extends 'base.html.twig' %}

{% block title %}Tweet de {{ tweet.tweeter.pseudo ?? 'Utilisateur inconnu' }}{% endblock %}

{% block body %}
<div class="container">
    <h1>Tweet</h1>

    <div class="tweet">
        <strong>{{ tweet.tweeter.pseudo ?? 'Utilisateur inconnu' }}</strong><br>
        <p>{{ tweet.content }}</p>
        <small>{{ tweet.publicationDate|date('d/m/Y H:i') }}</small>
    </div>

    <hr>

    <h2>Likes</h2>
    <ul>
        {% for like in likes %}
            <li>{{ like.pseudo }}</li>
        {% else %}
            <li>Aucun like pour ce tweet.</li>
        {% endfor %}
    </ul>

    <form method="post" action="{{ path('tweet_like', { id: tweet.id }) }}">
        <button type="submit">‚ù§Ô∏è Liker</button>
    </form>

    {# templates/tweet/show.html.twig #}
    
    {% if tweet.isCurrentUser %}
        <h2>Modifier le tweet</h2>
        <form method="put" action="{{ path('update_post', { id: tweet.id }) }}">
            <input type="hidden" name="_method" value="PUT">
            <textarea name="content" rows="3" required>{{ tweet.content }}</textarea><br>
            <button type="submit" class="tweet-button">Mettre √† jour</button>
        </form>
    {% endif %}

    {% if tweet.isCurrentUser %}
        <form method="delete" action="{{ path('delete_post', { id: tweet.id }) }}">
            <input type="hidden" name="_method" value="DELETE">
            <button type="submit" onclick="return confirm('Supprimer votre tweet ?')">
                üóëÔ∏è Supprimer mon tweet
            </button>
        </form>
    {% endif %}


    <a href="{{ path('tweets_home') }}">‚Üê Retour √† l'exploration</a>
</div>
{% endblock %}
